<!DOCTYPE html>
<html>
<head>
    <title>Message Encoder/Decoder</title>
    <!-- Add Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Add Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body{
        background-color: #2d3436;
        background-image: linear-gradient(315deg, #2d3436 0%, #000000 74%);
        }
        textarea{
        resize: none;
        }
    </style>
</head>
<body>

    <div class="container glass-effect p-4 rounded mt-5">
        <div class="mb-3">
            <textarea id="message" class="form-control bg-dark border border-danger text-warning" rows="3" placeholder="Type your message here" oninput="updateEncodedMessage()"></textarea>
        </div>
        <div class="input-group mb-3">
            <input type="text" id="encodedMessage" class="form-control bg-dark border border-info text-white">
            <div class="input-group-append">
                <button class="btn btn-danger" onclick="copyEncodedMessage()">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
        </div>
        <button class="btn btn-success mb-3" onclick="decodeMessage()">Decode</button>
        <div>
            <textarea id="decodedMessage" class="form-control bg-dark border border-warning text-danger" rows="4" readonly></textarea>
        </div>
        <button class="btn btn-info mt-4" onclick="resetFields()">Reset All</button>
    </div>

    <!-- Bootstrap Toast -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 5">
        <div id="copyToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-success">
                <strong class="me-auto text-white">Copied the encoded code</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            
        </div>
    </div>

    <!-- Add Bootstrap 5 JS and Popper.js (required for some Bootstrap components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateEncodedMessage() {
            const message = document.getElementById('message').value;
            if (message.trim() === '') {
                document.getElementById('encodedMessage').value = '';
            } else {
                let encodedMessage = '';
                for (let i = 0; i < message.length; i++) {
                    const charCode = message.charCodeAt(i);
                    encodedMessage += charCode.toString().padStart(3, '0') + '-';
                }
                encodedMessage = encodedMessage.slice(0, -1);
                document.getElementById('encodedMessage').value = encodedMessage;
            }
        }

        function decodeMessage() {
            const encodedMessage = document.getElementById('encodedMessage').value;
            if (encodedMessage.trim() === '') {
                alert('Please enter an encoded message to decode.');
                return;
            }

            const encodedArray = encodedMessage.split('-');
            let decodedMessage = '';
            for (let i = 0; i < encodedArray.length; i++) {
                const charCode = parseInt(encodedArray[i], 10);
                if (isNaN(charCode)) {
                    alert('Invalid encoded message format.');
                    return;
                }
                decodedMessage += String.fromCharCode(charCode);
            }
            document.getElementById('decodedMessage').value = decodedMessage;


            // Show success feedback
            const messageValidation = document.getElementById('messageValidation');
            messageValidation.classList.remove('text-danger');
            messageValidation.innerText = 'Message decoded successfully';
            messageValidation.classList.add('text-success');
        }

        function copyEncodedMessage() {
            const encodedMessage = document.getElementById('encodedMessage');
            encodedMessage.select();
            document.execCommand('copy');
            encodedMessage.setSelectionRange(0, 0); // Deselect the input box after copying

            // Show the "Copied" toast
            const copyToast = document.getElementById('copyToast');
            const toast = new bootstrap.Toast(copyToast);
            toast.show();
        }

        // Clear success feedback after a few seconds
        const messageValidation = document.getElementById('messageValidation');
        setTimeout(() => {
            messageValidation.innerText = '';
            messageValidation.classList.remove('text-success');
            messageValidation.classList.add('text-danger');
        }, 2000);

        // Clear input field focus highlight on mouse click
        document.addEventListener('click', () => {
            const inputFields = document.querySelectorAll('input, textarea');
            inputFields.forEach((field) => {
                field.classList.remove('focused');
            });
        });

        function resetFields() {
            document.getElementById('message').value = '';
            document.getElementById('encodedMessage').value = '';
            document.getElementById('decodedMessage').value = '';

            // Show success feedback
            const messageValidation = document.getElementById('messageValidation');
            messageValidation.classList.remove('text-danger', 'text-success');
            messageValidation.innerText = '';
        }
    </script>
</body>
</html>
